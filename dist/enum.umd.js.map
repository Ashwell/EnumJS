{"version":3,"file":"enum.umd.js","sources":["../src/define.js","../src/assign.js","../src/arg-parse.js","../src/create-proto.js","../src/stringify-symbol.js","../src/enum.js","../src/assign-to.js","../src/api.es5.js"],"sourcesContent":["\nvar\n  define,\n  defaults = {\n    configurable: false,\n    enumerable: true,\n    writable: false\n  };\n\ndefine = function( instance, name, value, traits = {}) {\n  traits = Object.assign({}, defaults, traits, { value });\n  return Object.defineProperty( instance, name, traits );\n};\n\nexport default define;\n","/*eslint-disable no-unused-vars*/\nimport define from './define';\n\nvar assign = function( enumInstance, assignTo ) {\n  for ( let { key, value } of enumInstance ) {\n    define( assignTo, key, value );\n  }\n};\n\nexport default assign;\n","\n/**\n * possible argument signatures\n *  $enum( ...names )\n *  $enum({ name: value })\n *  $enum([ names ])\n *  $enum( startIndex, [ names ])\n *\n *  names can be strings or Symbols, except for when single object of own keys\n *\n * transformed to [ keys<Array>, [values<Array>] ]\n**/\nvar\n  intRange,\n  symbolsOrRange,\n  getKeyValueFromObject;\n\nintRange = function( first, last ) {\n  var\n    curr = typeof first === 'number' ? first : 0,\n    arr = [ curr ];\n\n  while ( last > ++curr ) {\n    arr.push( curr );\n  }\n\n  return arr;\n};\n\nsymbolsOrRange = function( list, first, last ) {\n  return typeof list[ 0 ] === 'symbol' ? list : intRange( first, last );\n};\n\ngetKeyValueFromObject = function( object ) {\n  var\n    keys = [],\n    values = [];\n\n  Object.keys( object ).forEach( key => {\n    keys.push( key );\n    values.push( object[ key ]);\n  });\n\n  return [ keys, values ];\n};\n\n/*eslint func-style:0*/\nexport default function argParse( ...args ) {\n  var\n    [ first, second ] = args,\n    firstType = typeof first;\n\n  // single argument, ( object | array | string | Symbol )\n  if ( args.length === 1 ) {\n    let isArray = Array.isArray( first );\n\n    // single symbol\n    if ( firstType === 'symbol' ) {\n      return [ args, args ];\n    }\n\n    // single string\n    if ( firstType === 'string' ) {\n      return [ args, [ 0 ]];\n    }\n\n    // single array\n    if ( isArray ) {\n      return [ first, symbolsOrRange( first, 0, first.length ) ];\n    }\n\n    // I guess it's an object\n    return getKeyValueFromObject( first );\n  }\n\n  // two arguments, ( startIndex, [ names ])\n  if ( args.length === 2 && firstType === 'number' && Array.isArray( second )) {\n    return [ second, intRange( first, second.length + first ) ];\n  }\n\n  // \"unlimited\" args, ( ...names );\n  return [ args, symbolsOrRange( args, 0, args.length ) ];\n}\n","\nimport define from './define';\n\nvar\n  stringReduce,\n  jsonReduce;\n\nstringReduce = function( str, key, index ) {\n  return `${index === 0 ? str : str + ', '}${key}:${this.values[ index ]}`;\n};\n\njsonReduce = function( obj, key, index ) {\n  obj[ key ] = this.values[ index ];\n  return obj;\n};\n\n/*eslint-disable func-style*/\nexport default function createProto( keys, values, constructor ) {\n  /*eslint-enable func-style*/\n  var proto = {};\n\n  define( proto, 'length', keys.length );\n  define( proto, 'keys', keys, { enumerable: false });\n  define( proto, 'values', values, { enumerable: false });\n\n  // toString\n  ( function() {\n    var stringCache = null;\n\n    define( proto, 'toString', function() {\n      if ( stringCache == null ) {\n        stringCache = this.keys.reduce(\n            stringReduce.bind( this ),\n            '[ '\n          ) + ' ]';\n      }\n\n      return stringCache;\n    });\n  })();\n\n  //toJSON\n  ( function() {\n    var jsonCache = null;\n\n    define( proto, 'toJSON', function() {\n      if ( jsonCache == null ) {\n        jsonCache = this.keys.reduce(\n          jsonReduce.bind( this ),\n          {}\n        );\n      }\n\n      return jsonCache;\n    });\n  })();\n\n  // Well known Symbols\n  if ( Symbol.toStringTag ) {\n    define( proto, Symbol.toStringTag, 'Enum' );\n  }\n\n  if ( Symbol.toPrimitive ) {\n    define( proto, Symbol.toPrimitive, function( hint ) {\n      switch ( hint ) {\n        case 'number':\n          return this.length;\n        case 'string':\n          return `[ ${this.keys.join( ', ' )} ]`;\n        default:\n          return true;\n      }\n    }, { enumerable: false });\n  }\n\n  /*\n  TODO fix missing regeneratorRuntime\n  define( proto, Symbol.iterator, function*() {\n    for ( let i = 0 ; i < this.length ; i++ ) {\n      let\n        key = this.keys[ i ],\n        value = this.values[ i ];\n\n      yield { key, value };\n    }\n  });\n  */\n\n  proto.constructor = constructor;\n  return Object.freeze( proto );\n}\n","/*eslint-disable func-style*/\nexport default function stringifySymbol( symbol ) {\n  var symStr = symbol.toString();\n  return symStr.slice( 7, symStr.length - 1 );\n}\n","\nimport define from './define';\nimport argParse from './arg-parse';\nimport createProto from './create-proto';\nimport stringifySymbol from './stringify-symbol';\n\nvar\n  factory,\n  $enum;\n\nfactory = function( keys, values ) {\n  var Enum;\n//  console.log( 'factory arguments: keys, values' );\n//  console.log( keys );\n//  console.log( values );\n  keys = typeof keys[0] === 'symbol' ? keys.map( stringifySymbol ) : keys;\n\n  Enum = function() {\n    keys.forEach(( key, index ) => define( this, key, values[ index ]));\n  };\n\n  Enum.prototype = createProto( keys, values, Enum );\n  return Object.freeze( new Enum());\n};\n\n$enum = function( ...args ) {\n  return factory( ...argParse( ...args ));\n};\n\nexport default $enum;\n","/*eslint-disable no-unused-vars*/\nimport $enum from './enum';\nimport assign from './assign';\n\nvar assignTo;\n\nassignTo = function( assignee, ...args ) {\n  assign( $enum( ...args ), assignee );\n};\n\nexport default assignTo;\n","\nimport $enum from './enum';\nimport assign from './assign';\nimport assignTo from './assign-to';\n\n$enum.assign = assign;\n$enum.assignTo = assignTo;\n\nexport default $enum;\n\n"],"names":["define","$enum","assignTo"],"mappings":"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"}