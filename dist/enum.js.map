{"version":3,"file":"enum.js","sources":["../src/define.js","../src/arg-parse.js","../src/create-proto.js","../src/stringify-symbol.js","../src/enum.js","../src/assign.js","../src/assign-to.js"],"sourcesContent":["\nvar\n  define,\n  defaults = {\n    configurable: false,\n    enumerable: true,\n    writable: false\n  };\n\ndefine = function( instance, name, value, traits = {}) {\n  traits = Object.assign({}, defaults, traits, { value });\n  return Object.defineProperty( instance, name, traits );\n};\n\nexport default define;\n","\n/**\n * possible argument signatures\n *  $enum( ...names )\n *  $enum({ name: value })\n *  $enum([ names ])\n *  $enum( startIndex, [ names ])\n *\n *  names can be strings or Symbols, except for when single object of own keys\n *\n * transformed to [ keys<Array>, [values<Array>] ]\n**/\nvar\n  intRange,\n  symbolsOrRange,\n  getKeyValueFromObject;\n\nintRange = function( first, last ) {\n  var\n    curr = typeof first === 'number' ? first : 0,\n    arr = [ curr ];\n\n  while ( last > ++curr ) {\n    arr.push( curr );\n  }\n\n  return arr;\n};\n\nsymbolsOrRange = function( list, first, last ) {\n  return typeof list[ 0 ] === 'symbol' ? list : intRange( first, last );\n};\n\ngetKeyValueFromObject = function( object ) {\n  var\n    keys = [],\n    values = [];\n\n  Object.keys( object ).forEach( key => {\n    keys.push( key );\n    values.push( object[ key ]);\n  });\n\n  return [ keys, values ];\n};\n\n/*eslint func-style:0*/\nexport default function argParse( ...args ) {\n  var\n    [ first, second ] = args,\n    firstType = typeof first;\n\n  // single argument, ( object | array | string | Symbol )\n  if ( args.length === 1 ) {\n    let isArray = Array.isArray( first );\n\n    // single symbol\n    if ( firstType === 'symbol' ) {\n      return [ args, args ];\n    }\n\n    // single string\n    if ( firstType === 'string' ) {\n      return [ args, [ 0 ]];\n    }\n\n    // single array\n    if ( isArray ) {\n      return [ first, symbolsOrRange( first, 0, first.length ) ];\n    }\n\n    // I guess it's an object\n    return getKeyValueFromObject( first );\n  }\n\n  // two arguments, ( startIndex, [ names ])\n  if ( args.length === 2 && firstType === 'number' && Array.isArray( second )) {\n    return [ second, intRange( first, second.length + first ) ];\n  }\n\n  // \"unlimited\" args, ( ...names );\n  return [ args, symbolsOrRange( args, 0, args.length ) ];\n}\n","\nimport define from './define';\n\nvar\n  stringReduce,\n  jsonReduce;\n\nstringReduce = function( str, key, index ) {\n  return `${index === 0 ? str : str + ', '}${key}:${this.values[ index ]}`;\n};\n\njsonReduce = function( obj, key, index ) {\n  obj[ key ] = this.values[ index ];\n  return obj;\n};\n\n/*eslint-disable func-style*/\nexport default function createProto( keys, values, constructor ) {\n  /*eslint-enable func-style*/\n  var proto = {};\n\n  define( proto, 'length', keys.length );\n  define( proto, 'keys', keys, { enumerable: false });\n  define( proto, 'values', values, { enumerable: false });\n\n  // toString\n  (function() {\n    var stringCache = null;\n\n    define( proto, 'toString', function() {\n      if ( stringCache == null ) {\n        stringCache = this.keys.reduce(\n            stringReduce.bind( this ),\n            '[ '\n          ) + ' ]';\n      }\n\n      return stringCache;\n    });\n  })();\n\n  //toJSON\n  (function() {\n    var jsonCache = null;\n\n    define( proto, 'toJSON', function() {\n      if ( jsonCache == null ) {\n        jsonCache = this.keys.reduce(\n          jsonReduce.bind( this ),\n          {}\n        );\n      }\n\n      return jsonCache;\n    });\n  })();\n\n  // Well known Symbols\n  if ( Symbol.toStringTag ) {\n    define( proto, Symbol.toStringTag, 'Enum' );\n  }\n\n  if ( Symbol.toPrimitive ) {\n    define( proto, Symbol.toPrimitive, function( hint ) {\n      switch ( hint ) {\n        case 'number':\n          return this.length;\n        case 'string':\n          return `[ ${this.keys.join( ', ' )} ]`;\n        default:\n          return true;\n      }\n    }, { enumerable: false });\n  }\n\n  /*\n  TODO fix missing regeneratorRuntime\n  define( proto, Symbol.iterator, function*() {\n    for ( let i = 0 ; i < this.length ; i++ ) {\n      let\n        key = this.keys[ i ],\n        value = this.values[ i ];\n\n      yield { key, value };\n    }\n  });\n  */\n\n  proto.constructor = constructor;\n  return Object.freeze( proto );\n}\n","/*eslint-disable func-style*/\nexport default function stringifySymbol( symbol ) {\n  var symStr = symbol.toString();\n  return symStr.slice( 7, symStr.length - 1 );\n}\n","\nimport define from './define';\nimport argParse from './arg-parse';\nimport createProto from './create-proto';\nimport stringifySymbol from './stringify-symbol';\n\nvar\n  factory,\n  $enum;\n\nfactory = function( keys, values ) {\n  var Enum;\n//  console.log( 'factory arguments: keys, values' );\n//  console.log( keys );\n//  console.log( values );\n  keys = typeof keys[0] === 'symbol' ? keys.map( stringifySymbol ) : keys;\n\n  Enum = function() {\n    keys.forEach(( key, index ) => define( this, key, values[ index ]));\n  };\n\n  Enum.prototype = createProto( keys, values, Enum );\n  return Object.freeze( new Enum());\n};\n\n$enum = function( ...args ) {\n  return factory( ...argParse( ...args ));\n};\n\nexport default $enum;\n","/*eslint-disable no-unused-vars*/\nimport define from './define';\n\nvar assign = function( enumInstance, assignTo ) {\n  for ( let { key, value } of enumInstance ) {\n    define( assignTo, key, value );\n  }\n};\n\nexport default assign;\n","/*eslint-disable no-unused-vars*/\nimport $enum from './enum';\nimport assign from './assign';\n\nvar assignTo;\n\nassignTo = function( assignee, ...args ) {\n  assign( $enum( ...args ), assignee );\n};\n\nexport default assignTo;\n"],"names":["define","$enum"],"mappings":"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"}